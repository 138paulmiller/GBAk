#!/bin/bash
# Paul Miller - autogenerated script by tool installer script	
# This script is used to convert a PNG to a C-array using png2gba and move the 	
# generated header file into the include directory	
# DO NOT move this script without updating location of PNG2GBA	
if [ $# -gt 1 ]; then	
	WD=${PWD};	
	P2G=$WD/tools/png2gba/png2gba 
	DEST=$WD/$1;
	for IMG in ${@:2}; do
		# move to avoid directory in header vars
		DIR=$(dirname $IMG) 
		BASE=$(basename $IMG)
		cd $DIR
		# gen header file
		if [ -t $(sudo $P2G -t -p $BASE) ]; then
			# substitute .png ext with .h 
			HEADER=$(sudo echo $BASE | sed -e "s/.png/.h/g")
			sudo mv $HEADER $DEST
			echo Converted $DIR/$BASE to $DEST/$HEADER		
		else
			echo "FAILED"
		fi
	done;
else
 echo Usage ./png2h destination img0.png [img1.png ... ]
fi
